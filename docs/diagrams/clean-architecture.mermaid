graph TD
    %% Estilos Globales
    classDef domain fill:#e1f5fe,stroke:#01579b,stroke-width:2px,color:#01579b;
    classDef infra fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#4a148c;
    classDef core fill:#ffffff,stroke:#333,stroke-width:1px,color:#333;

    subgraph Domain [" CORE DOMAIN (Reglas de Negocio) "]
        direction TB
        E[Entities / Models]:::core
        UC[Use Cases]:::core
        DS[Domain Services]:::core
        Interfaces[Repository Interfaces]:::core
    end

    subgraph Infrastructure [" INFRASTRUCTURE (Detalles TÃ©cnicos) "]
        direction TB
        C[Controllers / HTTP]:::core
        R[Repositories Impl]:::core
        S[Security Adapters]:::core
        DB[(Database)]:::core
    end

    %% Relaciones de Dependencia (La flecha apunta a quien conoces)
    C -->|Usa| UC
    R -->|Implementa| Interfaces
    S -->|Implementa| DS
    UC -->|Manipula| E
    UC -->|Define Contrato| Interfaces
    UC -->|Usa| DS
    R -->|Persiste en| DB

    %% Aplicar estilos a subgrafos
    style Domain fill:#e3f2fd,stroke:#2196f3,stroke-width:2px,rx:10,ry:10
    style Infrastructure fill:#fce4ec,stroke:#e91e63,stroke-width:2px,rx:10,ry:10
